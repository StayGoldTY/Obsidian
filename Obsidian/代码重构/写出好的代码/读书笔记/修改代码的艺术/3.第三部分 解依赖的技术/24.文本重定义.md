一些新的解释型语言提供了非常好的解依赖途径。在被解释的时候，方法可以被及时重定义。 比如下面是个Ruby的例子：
![[Pasted image 20240524165445.png]]有一点非常值得注意，即我们并没有重定义整个的Account  类，而只是重定义了它的 report_deposit   方法。Ruby解释器将ruby代码文件的每行都看作可执行语句。而 “classAccount”   语句就相当于打开了Account  类的定义，从而新的方法定义可以被添加进去。而“def   report_deposit(value)”              语句则开始往打开的类中添加新方法。Ruby解释器并不关心该方法 是否已有定义体存在，如果有的话就替换掉。

**Ruby中的文本重定义 (Text    Redefinition) 也有它的缺点：新方法对旧方法的替换会一直 有效，直到程序结束。所以如果你后面忘记了某方法已被重定义了的话就可能会遇到麻烦。
其实我们在C/C++ 中也可以进行文本重定义——使用预处理!。关于这个的一个例子可以参 考第4章描述预处理期接缝(29页)一节中的例子。

**步骤
在Ruby 中使用文本重定义的步骤如下：
(1)找出你想要替换定义的方法所在的类。
(2)在测试源文件开头添加一行require 引入包含目标类的模块。
(3)在测试源文件的开头给每一个你想要替换的方法提供新的定义。
