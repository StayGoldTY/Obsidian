为了领略单元测试的价值，你需要拥有“啊哈！”时刻——当你编写的单元测试为你节省了一天的时间，那就是“啊哈！”时刻。在到达这一步之前，你需要脚踏实地，好好编写这些测试，并使它们在持续集成中运行。而且，你可能需要持续做上几个月，才会得到一个“啊哈！”时刻。
我有两个这样的时刻。第一个发生在我为一个小型在线赌场构建后端引擎（作为辅助项目）时。该 API 正在管理真金白银，我因为害怕犯错误，所以用单元测试覆盖了所有代码。该项目交付比我预想要晚——部分原因归咎于测试，它们耗费了很多时间。但是这样做是正确的。我在合同结束时将项目移交给了客户，两年后，他们告诉我，这些测试多次挽救了团队——如果不是因为测试失败，代码漏洞将会扩散到生产环境中。
我的另一个“啊哈”时刻是在 Web 上构建 Skype。我们在 web.skype.com 上给 Google Hangouts 创造了一个新的竞争对手。我们团队是一支强大的团队，拥有完整的单元覆盖范围和严格的集成测试。进入项目三个月后，工程师决定重构整个项目的结构。这是非常冒险的重构，我们所有人都投票反对这样做。
那位工程师指出，基于现有的测试覆盖率，这次重构应该是小菜一碟，只要测试通过，重构就没问题。我对此表示怀疑。但这正是测试用例的用处。经过为期一周的重构，他推动了一次巨大的变革……一切都没有中断，当时没有，之后也没有。所有测试均通过。就在那刻，我意识到了一套强大的测试用例所能提供的安全保障，以及它能够让我们不害怕重构的事实。


一些建议：给当年刚做程序员的我
原文链接： https://www.infoq.cn/article/p7aBUtyDykgie65Khuyt?utm_source=related_read_bottom&utm_medium=article